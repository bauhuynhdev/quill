{"version":3,"file":"clipboard.js","names":["Attributor","BlockBlot","ClassAttributor","EmbedBlot","Scope","StyleAttributor","Delta","BlockEmbed","logger","Module","Quill","AlignAttribute","AlignStyle","BackgroundStyle","CodeBlock","ColorStyle","DirectionAttribute","DirectionStyle","FontStyle","SizeStyle","deleteRange","normalizeExternalHTML","debug","CLIPBOARD_CONFIG","Node","TEXT_NODE","matchText","matchNewline","matchBreak","ELEMENT_NODE","matchBlot","matchAttributor","matchStyles","matchIndent","matchList","matchCodeBlock","matchTable","createMatchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","reduce","memo","attr","keyName","STYLE_ATTRIBUTORS","Clipboard","DEFAULTS","matchers","constructor","quill","options","root","addEventListener","e","onCaptureCopy","onCapturePaste","bind","concat","forEach","_ref","selector","matcher","addMatcher","push","convert","_ref2","html","text","formats","arguments","length","undefined","blotName","insert","delta","convertHTML","deltaEndsWith","ops","attributes","table","compose","retain","delete","normalizeHTML","doc","DOMParser","parseFromString","container","body","nodeMatches","WeakMap","elementMatchers","textMatchers","prepareMatching","traverse","scroll","dangerouslyPasteHTML","index","source","sources","API","setContents","setSelection","SILENT","paste","updateContents","isCut","defaultPrevented","preventDefault","range","selection","getRange","onCopy","clipboardData","setData","normalizeURIList","urlList","split","filter","url","join","isEnabled","getSelection","getData","test","onPaste","getText","getSemanticHTML","_ref3","getFormat","pastedDelta","log","USER","scrollSelectionIntoView","pair","Array","from","querySelectorAll","node","has","matches","get","set","applyFormat","format","value","query","newDelta","op","endText","i","slice","isLine","Element","match","prototype","includes","tagName","toLowerCase","isBetweenInlineElements","previousElementSibling","nextElementSibling","preNodes","isPre","parentNode","nodeType","childNodes","childNode","childrenDelta","reducedDelta","_node","keys","classes","styles","name","ATTRIBUTE","attrName","Object","entries","_ref4","embed","language","indent","parent","composed","element","list","checkedAttr","getAttribute","HTMLParagraphElement","nextSibling","firstChild","style","fontStyle","italic","textDecoration","underline","strike","fontWeight","startsWith","parseInt","bold","_ref5","parseFloat","textIndent","parentElement","rows","row","indexOf","data","trim","replacer","collapse","replaced","replace","previousSibling","default"],"sources":["../../src/modules/clipboard.ts"],"sourcesContent":["import type { ScrollBlot } from 'parchment';\r\nimport {\r\n  Attributor,\r\n  BlockBlot,\r\n  ClassAttributor,\r\n  EmbedBlot,\r\n  Scope,\r\n  StyleAttributor,\r\n} from 'parchment';\r\nimport Delta from 'quill-delta';\r\nimport { BlockEmbed } from '../blots/block.js';\r\nimport type { EmitterSource } from '../core/emitter.js';\r\nimport logger from '../core/logger.js';\r\nimport Module from '../core/module.js';\r\nimport Quill from '../core/quill.js';\r\nimport type { Range } from '../core/selection.js';\r\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\r\nimport { BackgroundStyle } from '../formats/background.js';\r\nimport CodeBlock from '../formats/code.js';\r\nimport { ColorStyle } from '../formats/color.js';\r\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\r\nimport { FontStyle } from '../formats/font.js';\r\nimport { SizeStyle } from '../formats/size.js';\r\nimport { deleteRange } from './keyboard.js';\r\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\r\n\r\nconst debug = logger('quill:clipboard');\r\n\r\ntype Selector = string | Node['TEXT_NODE'] | Node['ELEMENT_NODE'];\r\ntype Matcher = (node: Node, delta: Delta, scroll: ScrollBlot) => Delta;\r\n\r\nconst CLIPBOARD_CONFIG: [Selector, Matcher][] = [\r\n  [Node.TEXT_NODE, matchText],\r\n  [Node.TEXT_NODE, matchNewline],\r\n  ['br', matchBreak],\r\n  [Node.ELEMENT_NODE, matchNewline],\r\n  [Node.ELEMENT_NODE, matchBlot],\r\n  [Node.ELEMENT_NODE, matchAttributor],\r\n  [Node.ELEMENT_NODE, matchStyles],\r\n  ['li', matchIndent],\r\n  ['ol, ul', matchList],\r\n  ['pre', matchCodeBlock],\r\n  ['tr', matchTable],\r\n  ['b', createMatchAlias('bold')],\r\n  ['i', createMatchAlias('italic')],\r\n  ['strike', createMatchAlias('strike')],\r\n  ['style', matchIgnore],\r\n];\r\n\r\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\r\n  (memo: Record<string, Attributor>, attr) => {\r\n    memo[attr.keyName] = attr;\r\n    return memo;\r\n  },\r\n  {},\r\n);\r\n\r\nconst STYLE_ATTRIBUTORS = [\r\n  AlignStyle,\r\n  BackgroundStyle,\r\n  ColorStyle,\r\n  DirectionStyle,\r\n  FontStyle,\r\n  SizeStyle,\r\n].reduce((memo: Record<string, Attributor>, attr) => {\r\n  memo[attr.keyName] = attr;\r\n  return memo;\r\n}, {});\r\n\r\ninterface ClipboardOptions {\r\n  matchers: [Selector, Matcher][];\r\n}\r\n\r\nclass Clipboard extends Module<ClipboardOptions> {\r\n  static DEFAULTS: ClipboardOptions = {\r\n    matchers: [],\r\n  };\r\n\r\n  matchers: [Selector, Matcher][];\r\n\r\n  constructor(quill: Quill, options: Partial<ClipboardOptions>) {\r\n    super(quill, options);\r\n    this.quill.root.addEventListener('copy', (e) =>\r\n      this.onCaptureCopy(e, false),\r\n    );\r\n    this.quill.root.addEventListener('cut', (e) => this.onCaptureCopy(e, true));\r\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\r\n    this.matchers = [];\r\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(\r\n      ([selector, matcher]) => {\r\n        this.addMatcher(selector, matcher);\r\n      },\r\n    );\r\n  }\r\n\r\n  addMatcher(selector: Selector, matcher: Matcher) {\r\n    this.matchers.push([selector, matcher]);\r\n  }\r\n\r\n  convert(\r\n    { html, text }: { html?: string; text?: string },\r\n    formats: Record<string, unknown> = {},\r\n  ) {\r\n    if (formats[CodeBlock.blotName]) {\r\n      return new Delta().insert(text || '', {\r\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\r\n      });\r\n    }\r\n    if (!html) {\r\n      return new Delta().insert(text || '', formats);\r\n    }\r\n    const delta = this.convertHTML(html);\r\n    // Remove trailing newline\r\n    if (\r\n      deltaEndsWith(delta, '\\n') &&\r\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\r\n    ) {\r\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\r\n    }\r\n    return delta;\r\n  }\r\n\r\n  protected normalizeHTML(doc: Document) {\r\n    normalizeExternalHTML(doc);\r\n  }\r\n\r\n  protected convertHTML(html: string) {\r\n    const doc = new DOMParser().parseFromString(html, 'text/html');\r\n    this.normalizeHTML(doc);\r\n    const container = doc.body;\r\n    const nodeMatches = new WeakMap();\r\n    const [elementMatchers, textMatchers] = this.prepareMatching(\r\n      container,\r\n      nodeMatches,\r\n    );\r\n    return traverse(\r\n      this.quill.scroll,\r\n      container,\r\n      elementMatchers,\r\n      textMatchers,\r\n      nodeMatches,\r\n    );\r\n  }\r\n\r\n  dangerouslyPasteHTML(html: string, source?: EmitterSource): void;\r\n  dangerouslyPasteHTML(\r\n    index: number,\r\n    html: string,\r\n    source?: EmitterSource,\r\n  ): void;\r\n  dangerouslyPasteHTML(\r\n    index: number | string,\r\n    html?: string,\r\n    source: EmitterSource = Quill.sources.API,\r\n  ) {\r\n    if (typeof index === 'string') {\r\n      const delta = this.convert({ html: index, text: '' });\r\n      // @ts-expect-error\r\n      this.quill.setContents(delta, html);\r\n      this.quill.setSelection(0, Quill.sources.SILENT);\r\n    } else {\r\n      const paste = this.convert({ html, text: '' });\r\n      this.quill.updateContents(\r\n        new Delta().retain(index).concat(paste),\r\n        source,\r\n      );\r\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\r\n    }\r\n  }\r\n\r\n  onCaptureCopy(e: ClipboardEvent, isCut = false) {\r\n    if (e.defaultPrevented) return;\r\n    e.preventDefault();\r\n    const [range] = this.quill.selection.getRange();\r\n    if (range == null) return;\r\n    const { html, text } = this.onCopy(range, isCut);\r\n    e.clipboardData?.setData('text/plain', text);\r\n    e.clipboardData?.setData('text/html', html);\r\n    if (isCut) {\r\n      deleteRange({ range, quill: this.quill });\r\n    }\r\n  }\r\n\r\n  /*\r\n   * https://www.iana.org/assignments/media-types/text/uri-list\r\n   */\r\n  private normalizeURIList(urlList: string) {\r\n    return (\r\n      urlList\r\n        .split(/\\r?\\n/)\r\n        // Ignore all comments\r\n        .filter((url) => url[0] !== '#')\r\n        .join('\\n')\r\n    );\r\n  }\r\n\r\n  onCapturePaste(e: ClipboardEvent) {\r\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\r\n    e.preventDefault();\r\n    const range = this.quill.getSelection(true);\r\n    if (range == null) return;\r\n    const html = e.clipboardData?.getData('text/html');\r\n    if (html && /<img/i.test(html)) return;\r\n    let text = e.clipboardData?.getData('text/plain');\r\n    if (!html && !text) {\r\n      const urlList = e.clipboardData?.getData('text/uri-list');\r\n      if (urlList) {\r\n        text = this.normalizeURIList(urlList);\r\n      }\r\n    }\r\n    // const files = Array.from(e.clipboardData?.files || []);\r\n    // if (!html && files.length > 0) {\r\n    //   this.quill.uploader.upload(range, files);\r\n    //   return;\r\n    // }\r\n    // if (html && files.length > 0) {\r\n    //   const doc = new DOMParser().parseFromString(html, 'text/html');\r\n    //   if (\r\n    //     doc.body.childElementCount === 1 &&\r\n    //     doc.body.firstElementChild?.tagName === 'IMG'\r\n    //   ) {\r\n    //     this.quill.uploader.upload(range, files);\r\n    //     return;\r\n    //   }\r\n    // }\r\n    this.onPaste(range, { html, text });\r\n  }\r\n\r\n  onCopy(range: Range, isCut: boolean): { html: string; text: string };\r\n  onCopy(range: Range) {\r\n    const text = this.quill.getText(range);\r\n    const html = this.quill.getSemanticHTML(range);\r\n    return { html, text };\r\n  }\r\n\r\n  onPaste(range: Range, { text, html }: { text?: string; html?: string }) {\r\n    const formats = this.quill.getFormat(range.index);\r\n    const pastedDelta = this.convert({ text, html }, formats);\r\n    debug.log('onPaste', pastedDelta, { text, html });\r\n    const delta = new Delta()\r\n      .retain(range.index)\r\n      .delete(range.length)\r\n      .concat(pastedDelta);\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    // range.length contributes to delta.length()\r\n    this.quill.setSelection(\r\n      delta.length() - range.length,\r\n      Quill.sources.SILENT,\r\n    );\r\n    this.quill.scrollSelectionIntoView();\r\n  }\r\n\r\n  prepareMatching(container: Element, nodeMatches: WeakMap<Node, Matcher[]>) {\r\n    const elementMatchers: Matcher[] = [];\r\n    const textMatchers: Matcher[] = [];\r\n    this.matchers.forEach((pair) => {\r\n      const [selector, matcher] = pair;\r\n      switch (selector) {\r\n        case Node.TEXT_NODE:\r\n          textMatchers.push(matcher);\r\n          break;\r\n        case Node.ELEMENT_NODE:\r\n          elementMatchers.push(matcher);\r\n          break;\r\n        default:\r\n          Array.from(container.querySelectorAll(selector)).forEach((node) => {\r\n            if (nodeMatches.has(node)) {\r\n              const matches = nodeMatches.get(node);\r\n              matches?.push(matcher);\r\n            } else {\r\n              nodeMatches.set(node, [matcher]);\r\n            }\r\n          });\r\n          break;\r\n      }\r\n    });\r\n    return [elementMatchers, textMatchers];\r\n  }\r\n}\r\n\r\nfunction applyFormat(\r\n  delta: Delta,\r\n  format: string,\r\n  value: unknown,\r\n  scroll: ScrollBlot,\r\n): Delta {\r\n  if (!scroll.query(format)) {\r\n    return delta;\r\n  }\r\n\r\n  return delta.reduce((newDelta, op) => {\r\n    if (!op.insert) return newDelta;\r\n    if (op.attributes && op.attributes[format]) {\r\n      return newDelta.push(op);\r\n    }\r\n    const formats = value ? { [format]: value } : {};\r\n    return newDelta.insert(op.insert, { ...formats, ...op.attributes });\r\n  }, new Delta());\r\n}\r\n\r\nfunction deltaEndsWith(delta: Delta, text: string) {\r\n  let endText = '';\r\n  for (\r\n    let i = delta.ops.length - 1;\r\n    i >= 0 && endText.length < text.length;\r\n    --i // eslint-disable-line no-plusplus\r\n  ) {\r\n    const op = delta.ops[i];\r\n    if (typeof op.insert !== 'string') break;\r\n    endText = op.insert + endText;\r\n  }\r\n  return endText.slice(-1 * text.length) === text;\r\n}\r\n\r\nfunction isLine(node: Node, scroll: ScrollBlot) {\r\n  if (!(node instanceof Element)) return false;\r\n  const match = scroll.query(node);\r\n  // @ts-expect-error\r\n  if (match && match.prototype instanceof EmbedBlot) return false;\r\n\r\n  return [\r\n    'address',\r\n    'article',\r\n    'blockquote',\r\n    'canvas',\r\n    'dd',\r\n    'div',\r\n    'dl',\r\n    'dt',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'header',\r\n    'iframe',\r\n    'li',\r\n    'main',\r\n    'nav',\r\n    'ol',\r\n    'output',\r\n    'p',\r\n    'pre',\r\n    'section',\r\n    'table',\r\n    'td',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n  ].includes(node.tagName.toLowerCase());\r\n}\r\n\r\nfunction isBetweenInlineElements(node: HTMLElement, scroll: ScrollBlot) {\r\n  return (\r\n    node.previousElementSibling &&\r\n    node.nextElementSibling &&\r\n    !isLine(node.previousElementSibling, scroll) &&\r\n    !isLine(node.nextElementSibling, scroll)\r\n  );\r\n}\r\n\r\nconst preNodes = new WeakMap();\r\nfunction isPre(node: Node | null) {\r\n  if (node == null) return false;\r\n  if (!preNodes.has(node)) {\r\n    // @ts-expect-error\r\n    if (node.tagName === 'PRE') {\r\n      preNodes.set(node, true);\r\n    } else {\r\n      preNodes.set(node, isPre(node.parentNode));\r\n    }\r\n  }\r\n  return preNodes.get(node);\r\n}\r\n\r\nfunction traverse(\r\n  scroll: ScrollBlot,\r\n  node: ChildNode,\r\n  elementMatchers: Matcher[],\r\n  textMatchers: Matcher[],\r\n  nodeMatches: WeakMap<Node, Matcher[]>,\r\n): Delta {\r\n  // Post-order\r\n  if (node.nodeType === node.TEXT_NODE) {\r\n    return textMatchers.reduce((delta: Delta, matcher) => {\r\n      return matcher(node, delta, scroll);\r\n    }, new Delta());\r\n  }\r\n  if (node.nodeType === node.ELEMENT_NODE) {\r\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\r\n      let childrenDelta = traverse(\r\n        scroll,\r\n        childNode,\r\n        elementMatchers,\r\n        textMatchers,\r\n        nodeMatches,\r\n      );\r\n      if (childNode.nodeType === node.ELEMENT_NODE) {\r\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\r\n          return matcher(childNode as HTMLElement, reducedDelta, scroll);\r\n        }, childrenDelta);\r\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\r\n          (reducedDelta, matcher) => {\r\n            return matcher(childNode, reducedDelta, scroll);\r\n          },\r\n          childrenDelta,\r\n        );\r\n      }\r\n      return delta.concat(childrenDelta);\r\n    }, new Delta());\r\n  }\r\n  return new Delta();\r\n}\r\n\r\nfunction createMatchAlias(format: string) {\r\n  return (_node: Element, delta: Delta, scroll: ScrollBlot) => {\r\n    return applyFormat(delta, format, true, scroll);\r\n  };\r\n}\r\n\r\nfunction matchAttributor(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\r\n  const attributes = Attributor.keys(node);\r\n  const classes = ClassAttributor.keys(node);\r\n  const styles = StyleAttributor.keys(node);\r\n  const formats: Record<string, string | undefined> = {};\r\n  attributes\r\n    .concat(classes)\r\n    .concat(styles)\r\n    .forEach((name) => {\r\n      let attr = scroll.query(name, Scope.ATTRIBUTE) as Attributor;\r\n      if (attr != null) {\r\n        formats[attr.attrName] = attr.value(node);\r\n        if (formats[attr.attrName]) return;\r\n      }\r\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n      attr = STYLE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        attr = STYLE_ATTRIBUTORS[name];\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n    });\r\n\r\n  return Object.entries(formats).reduce(\r\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\r\n    delta,\r\n  );\r\n}\r\n\r\nfunction matchBlot(node: Node, delta: Delta, scroll: ScrollBlot) {\r\n  const match = scroll.query(node);\r\n  if (match == null) return delta;\r\n  // @ts-expect-error\r\n  if (match.prototype instanceof EmbedBlot) {\r\n    const embed = {};\r\n    // @ts-expect-error\r\n    const value = match.value(node);\r\n    if (value != null) {\r\n      // @ts-expect-error\r\n      embed[match.blotName] = value;\r\n      // @ts-expect-error\r\n      return new Delta().insert(embed, match.formats(node, scroll));\r\n    }\r\n  } else {\r\n    // @ts-expect-error\r\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\r\n      delta.insert('\\n');\r\n    }\r\n    if (\r\n      'blotName' in match &&\r\n      'formats' in match &&\r\n      typeof match.formats === 'function'\r\n    ) {\r\n      return applyFormat(\r\n        delta,\r\n        match.blotName,\r\n        match.formats(node, scroll),\r\n        scroll,\r\n      );\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchBreak(node: Node, delta: Delta) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    delta.insert('\\n');\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchCodeBlock(node: Node, delta: Delta, scroll: ScrollBlot) {\r\n  const match = scroll.query('code-block');\r\n  const language =\r\n    match && 'formats' in match && typeof match.formats === 'function'\r\n      ? match.formats(node, scroll)\r\n      : true;\r\n  return applyFormat(delta, 'code-block', language, scroll);\r\n}\r\n\r\nfunction matchIgnore() {\r\n  return new Delta();\r\n}\r\n\r\nfunction matchIndent(node: Node, delta: Delta, scroll: ScrollBlot) {\r\n  const match = scroll.query(node);\r\n  if (\r\n    match == null ||\r\n    // @ts-expect-error\r\n    match.blotName !== 'list' ||\r\n    !deltaEndsWith(delta, '\\n')\r\n  ) {\r\n    return delta;\r\n  }\r\n  let indent = -1;\r\n  let parent = node.parentNode;\r\n  while (parent != null) {\r\n    // @ts-expect-error\r\n    if (['OL', 'UL'].includes(parent.tagName)) {\r\n      indent += 1;\r\n    }\r\n    parent = parent.parentNode;\r\n  }\r\n  if (indent <= 0) return delta;\r\n  return delta.reduce((composed, op) => {\r\n    if (!op.insert) return composed;\r\n    if (op.attributes && typeof op.attributes.indent === 'number') {\r\n      return composed.push(op);\r\n    }\r\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\r\n  }, new Delta());\r\n}\r\n\r\nfunction matchList(node: Node, delta: Delta, scroll: ScrollBlot) {\r\n  const element = node as Element;\r\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\r\n\r\n  const checkedAttr = element.getAttribute('data-checked');\r\n  if (checkedAttr) {\r\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\r\n  }\r\n\r\n  return applyFormat(delta, 'list', list, scroll);\r\n}\r\n\r\nfunction matchNewline(node: Node, delta: Delta, scroll: ScrollBlot) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    if (\r\n      isLine(node, scroll) &&\r\n      (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)\r\n    ) {\r\n      return delta.insert('\\n');\r\n    }\r\n    if (delta.length() > 0 && node.nextSibling) {\r\n      let nextSibling: Node | null = node.nextSibling;\r\n      while (nextSibling != null) {\r\n        if (isLine(nextSibling, scroll)) {\r\n          return delta.insert('\\n');\r\n        }\r\n        const match = scroll.query(nextSibling);\r\n        // @ts-expect-error\r\n        if (match && match.prototype instanceof BlockEmbed) {\r\n          return delta.insert('\\n');\r\n        }\r\n        nextSibling = nextSibling.firstChild;\r\n      }\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchStyles(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\r\n  const formats: Record<string, unknown> = {};\r\n  const style: Partial<CSSStyleDeclaration> = node.style || {};\r\n  if (style.fontStyle === 'italic') {\r\n    formats.italic = true;\r\n  }\r\n  if (style.textDecoration === 'underline') {\r\n    formats.underline = true;\r\n  }\r\n  if (style.textDecoration === 'line-through') {\r\n    formats.strike = true;\r\n  }\r\n  if (\r\n    style.fontWeight?.startsWith('bold') ||\r\n    // @ts-expect-error Fix me later\r\n    parseInt(style.fontWeight, 10) >= 700\r\n  ) {\r\n    formats.bold = true;\r\n  }\r\n  delta = Object.entries(formats).reduce(\r\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\r\n    delta,\r\n  );\r\n  // @ts-expect-error\r\n  if (parseFloat(style.textIndent || 0) > 0) {\r\n    // Could be 0.5in\r\n    return new Delta().insert('\\t').concat(delta);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchTable(\r\n  node: HTMLTableRowElement,\r\n  delta: Delta,\r\n  scroll: ScrollBlot,\r\n) {\r\n  const table =\r\n    node.parentElement?.tagName === 'TABLE'\r\n      ? node.parentElement\r\n      : node.parentElement?.parentElement;\r\n  if (table != null) {\r\n    const rows = Array.from(table.querySelectorAll('tr'));\r\n    const row = rows.indexOf(node) + 1;\r\n    return applyFormat(delta, 'table', row, scroll);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchText(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\r\n  // @ts-expect-error\r\n  let text = node.data;\r\n  // Word represents empty line with <o:p>&nbsp;</o:p>\r\n  if (node.parentElement?.tagName === 'O:P') {\r\n    return delta.insert(text.trim());\r\n  }\r\n  if (!isPre(node)) {\r\n    if (\r\n      text.trim().length === 0 &&\r\n      text.includes('\\n') &&\r\n      !isBetweenInlineElements(node, scroll)\r\n    ) {\r\n      return delta;\r\n    }\r\n    const replacer = (collapse: unknown, match: string) => {\r\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\r\n      return replaced.length < 1 && collapse ? ' ' : replaced;\r\n    };\r\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\r\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\r\n    if (\r\n      (node.previousSibling == null &&\r\n        node.parentElement != null &&\r\n        isLine(node.parentElement, scroll)) ||\r\n      (node.previousSibling instanceof Element &&\r\n        isLine(node.previousSibling, scroll))\r\n    ) {\r\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\r\n    }\r\n    if (\r\n      (node.nextSibling == null &&\r\n        node.parentElement != null &&\r\n        isLine(node.parentElement, scroll)) ||\r\n      (node.nextSibling instanceof Element && isLine(node.nextSibling, scroll))\r\n    ) {\r\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\r\n    }\r\n  }\r\n  return delta.insert(text);\r\n}\r\n\r\nexport {\r\n  Clipboard as default,\r\n  matchAttributor,\r\n  matchBlot,\r\n  matchNewline,\r\n  matchText,\r\n  traverse,\r\n};\r\n"],"mappings":"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","ignoreList":[]}